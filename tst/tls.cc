#include<catch.hpp>
#include"options/log.h"
#include"tls/tls.h"
using namespace std;

TEST_CASE("full handshaking") {
//	Log::get_instance()->set_log_filter("tdiwef");
//	TLS<true> server; TLS<false> client;
//	server.client_hello(client.client_hello());
//	client.server_hello(server.server_hello());
//	client.server_certificate(server.server_certificate());
//	client.server_key_exchange(server.server_key_exchange());
//	client.server_hello_done(server.server_hello_done());
//	server.client_key_exchange(client.client_key_exchange());
//	server.change_cipher_spec(client.change_cipher_spec());
//	server.finished(client.finished());
//	client.change_cipher_spec(server.change_cipher_spec());
//	client.finished(server.finished());
//	REQUIRE("hello world" == server.decode(client.encode("hello world")));
//	REQUIRE("Hello!! world" == client.decode(server.encode("Hello!! world")));
//	REQUIRE("hello world" == server.decode(client.encode("hello world")));
//	REQUIRE("Hello!! world" == client.decode(server.encode("Hello!! world")));
//	Log::get_instance()->set_log_filter("TDIWEF");
}

